<form #form="ngForm" (ngSubmit)="onSubmit()" class="container">

  @if (errorMessage) {
    <div class="alert alert-danger mb-3">
      {{ errorMessage }}
    </div>
  }

  <div class="row">
    <!-- Username -->
    <div class="col-12">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Username</mat-label>
        <input
          matInput
          name="username"
          #usernameModel="ngModel"
          [(ngModel)]="credentials.username"
          required
          minlength="3"
        />
        @if (shouldShowError(usernameModel)) {
          <mat-error>
            {{ getErrorMessage(usernameModel.errors, 'Username') }}
          </mat-error>
        }
      </mat-form-field>
    </div>

    <!-- Password -->
    <div class="col-12">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Password</mat-label>
        <input
          matInput
          type="password"
          name="password"
          #passwordModel="ngModel"
          [(ngModel)]="credentials.password"
          required
          minlength="6"
        />
        @if (shouldShowError(passwordModel)) {
          <mat-error>
            {{ getErrorMessage(passwordModel.errors, 'Password') }}
          </mat-error>
        }
      </mat-form-field>
    </div>

    <div class="col div-button">
      <button
        type="submit"
        mat-flat-button
        color="primary"
        [disabled]="form.invalid"
      >
        Login
      </button>
    </div>
  </div>
</form>
